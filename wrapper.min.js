(()=>{let e=document.createElement("script");e.src="https://tokenization.develop.accept.blue/tokenization/v0.2",e.id="_iFrame",document.head.appendChild(e)})();class HostedIFrame{cardForm;constructor(e,t){this.tokenSourceKey=e,this.iframeMount=`#${t}`,this._onLoad(()=>{this.cardForm=new window.HostedTokenization(this.tokenSourceKey).create("card-form").mount(this.iframeMount)})}submit(e={}){var t=this;return new Promise(function(o,r){t.cardForm.getNonceToken().then(t=>{let n={Name:e.Name,Avs_Address:e.Avs_Address,Avs_Zip:e.Avs_Zip,Software:e.Software,Source:"nonce-"+t.nonce,Expiry_Month:t.expiryMonth,Expiry_Year:t.expiryYear};$.ajax({url:"/api/transactions/sourceverification",contentType:"application/json",data:JSON.stringify(n),type:"POST",success:function(e){o(e)},error:function(e){r(e)}})}).catch(e=>{r(e)})})}styles(e){return this._onLoad(()=>this.cardForm.setStyles(e)),this}_onLoad(e){window.addEventListener("load",e)}}
